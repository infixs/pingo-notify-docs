---
title: Guia de Templates
description: Aprenda a criar mensagens din√¢micas personalizadas.
icon: square-envelope
---

# Criando Notifica√ß√µes Customizadas

O Pingo Notify transforma eventos do WordPress, WooCommerce e muitos outros plugins em notifica√ß√µes autom√°ticas personalizadas.

<img src="/images/pt-BR/pingo-notify-wordpress-plugin-notification-base-example.png" alt="Interface do Editor de Templates" />

## 1. Configura√ß√£o do Envio

Antes de escrever a mensagem, defina na barra lateral:

### Trigger e Destino
1.  **Trigger (Gatilho):** O evento que dispara a notifica√ß√£o (ex: "Order Status Change" para "Conclu√≠do").
2.  **Conex√£o:** Qual conta conectada da sua loja enviar√° a mensagem.
3.  **Destinat√°rio:** Quem recebe a mensagem:
    *   Vari√°veis din√¢micas (ex: `{{ order.shipping.phone }}`).
    *   N√∫meros fixos (ex: `5511999999999`).
    *   M√∫ltiplos n√∫meros separando por v√≠rgula (ex: `{{ order.shipping.phone }}, 5511999999999`).
    
    <Info>
    **Recomenda√ß√£o:** Utilize `{{ order.full_phone }}`. Esta vari√°vel garante que o n√∫mero tenha o c√≥digo do pa√≠s, ao contr√°rio de `{{ order.billing.phone }}` que utiliza o campo exatamente como o preenchido pelo usu√°rio.
    </Info>

    <Warning>
    **Formato do N√∫mero:** Use sempre o formato completo internacional (DDI + DDD + N√∫mero), apenas n√∫meros e sem s√≠mbolos. O sinal de `+` no in√≠cio √© opcional (ex: `5511999999999` ou `+5511999999999`).
    </Warning>


**Adicionando e Editando Mensagens (Preview)**
Voc√™ pode configurar uma sequ√™ncia de mensagens para o mesmo evento. Interaja diretamente com o **Preview**:
*   **Adicionar Mensagem:** Clique no bot√£o **+** flutuante para adicionar um novo bal√£o de mensagem √† sequ√™ncia.
*   **Editar Conte√∫do:** Clique diretamente em qualquer **bal√£o de mensagem** no preview para selecion√°-lo e editar seu texto no painel √† esquerda.

### Rules (Regras Condicionais)

<img src="/images/pingo-notify-plugin-wordpress-notification-rules-form.png" alt="Interface do Editor de Templates para regras" />

As **Rules** (Regras) permitem adicionar intelig√™ncia aos seus envios, definindo crit√©rios espec√≠ficos para que uma mensagem seja disparada.

**Aplica√ß√£o por Mensagem**
As regras s√£o aplicadas individualmente a cada mensagem gerada. Isso significa que voc√™ pode filtrar envios com base nos dados espec√≠ficos daquele evento (ex: valor do pedido, status do pagamento, cidade de entrega, etc).

*   **Exemplo Pr√°tico**: Imagine uma regra para enviar apenas se o `order.total` for maior que **R$ 100**.
    *   Se um pedido de R$ 50 entrar, **o envio dessa mensagem (onde a regra foi aplicada) ser√° ignorado**.
    *   Se um pedido de R$ 150 entrar, **o envio √© realizado**.

**Validando a Regra (Simula√ß√£o Visual)**
Para garantir que sua l√≥gica est√° correta, use o **Preview** no editor:
1.  Troque o **Exemplo de Dados** (no topo esquerdo) para diferentes pedidos.
2.  Observe o comportamento do preview:
    *   üñºÔ∏è **Totalmente Vis√≠vel:** Regra **Verdadeira** (a mensagem seria enviada).
    *   üëª **Opacidade Baixa (Transparente):** Regra **Falsa** (o envio seria ignorado).

<div style={{ display: 'grid', placeItems: 'center' }}>
<img
  src="/images/pt-BR/pingo-notify-plugin-wordpress-message-opacity-preview.png"
  alt="Interface do Editor de Templates para regras"
/>
</div>

---

## 2. Editor de Mensagens

### Exemplo de Dados
No canto superior esquerdo, selecione um pedido real (ex: "Order #761"). Isso ativar√° o **Autocomplete** e mostrar√° dados reais nos testes.

### Barra de Ferramentas
*   **Attach:** Envie imagens, PDFs ou √°udios junto com o texto.
*   **Enviar Teste:** Use o bot√£o **Send Test** para enviar a mensagem ao seu n√∫mero pessoal antes de ativar (`Active`).

---

### Vari√°veis

Vari√°veis s√£o os espa√ßos reservados que ser√£o substitu√≠dos pelos dados reais do cliente ou pedido no momento do envio.

**Como usar**

Toda vari√°vel deve estar entre chaves duplas `{{ }}`.

```handlebars
Ol√° {{ order.billing.first_name }}, recebemos seu pedido!
```

Para acessar dados que est√£o dentro de outros objetos (como detalhes do endere√ßo dentro do pedido), usamos o ponto `.`.

```handlebars
Seu pedido ser√° enviado para: {{ order.shipping.city }} - {{ order.shipping.state }}
```

**Regras para Vari√°veis**

Ao escrever vari√°veis manualmente, atente-se ao que √© permitido:

<CardGroup cols={2}>
  <Card title="‚úÖ V√°lido" color="green">
    *   `{{ order.id }}` (Ponto para navegar em objetos)
    *   `{{ customer_name }}` (Underlines s√£o aceitos)
    *   `{{ total }}` (Nomes simples e min√∫sculos)
  </Card>
  <Card title="‚ùå Inv√°lido" color="red">
    *   `{{ order id }}` (N√£o use espa√ßos)
    *   `{{ Order.ID }}` (Evite letras mai√∫sculas, prefira min√∫sculas)
    *   `{{ $valor-total }}` (Evite caracteres especiais ou hifens no in√≠cio)
  </Card>
</CardGroup>

### L√≥gica de Controle (`If`, `Else`, `Each`)

Torne suas mensagens "inteligentes". Com a l√≥gica de controle, o pr√≥prio template decide quais informa√ß√µes mostrar (ou esconder) dependendo da situa√ß√£o de cada pedido.

#### 1. Condicionais (`if` / `else`)
O bloco `if` funciona como uma **pergunta** que o sistema faz aos dados antes de enviar a mensagem.

**Exemplo: Verificar se uma informa√ß√£o existe**
Imagine que voc√™ queira enviar o c√≥digo de rastreio, mas nem todos os pedidos possuem um ainda.
Se usarmos o `if`, o sistema pergunta: *"Existe um c√≥digo de rastreio preenchido?"*
*   **Sim:** Ele mostra o c√≥digo.
*   **N√£o:** Ele ignora e n√£o mostra nada (evitando enviar um espa√ßo em branco).

```handlebars
Seu pedido foi enviado! üöö
{{ #if order.tracking_code }}
C√≥digo de rastreio: {{ order.tracking_code }}
{{ /if }}
```

**Exemplo: Comparar Valores ("√â igual a...")**
Voc√™ pode querer mudar o texto dependendo da forma de pagamento. Aqui, o sistema pergunta: *"O m√©todo de pagamento √© igual a 'pix'?"*

```handlebars
Obrigado pela compra!

{{ #if order.payment_method "pix" }}
‚ÑπÔ∏è Seu pagamento via PIX foi confirmado instantaneamente.
{{ else }}
üïí Estamos processando a valida√ß√£o do seu cart√£o.
{{ /if }}
```
*Note que usamos o `else` (sen√£o) para dar uma alternativa caso a resposta seja "N√£o".*

**Exemplo: Compara√ß√£o Negativa ("√â diferente de...")**
√Äs vezes, queremos saber se algo **N√ÉO** aconteceu. No exemplo abaixo, verificamos se o pedido √© diferente de cancelado.

```handlebars
{{ #if order.status "!=" "cancelled" }}
‚úÖ Seu pedido segue ativo!
{{ /if }}
```

#### 2. Listas de Itens (`each`)
Seu cliente comprou 5 produtos diferentes. Voc√™ n√£o vai escrever 5 vezes o c√≥digo, certo?
O bloco `each` (cada) serve para **repetir** um peda√ßo do template para cada item encontrando na lista do pedido.

```handlebars
Resumo do Pedido #{{ order.id }}:

{{ #each order.items }}
üì¶ {{ name }}
   Qtd: {{ quantity }} x R$ {{ price }}
{{ /each }}

Total: R$ {{ order.total }}
```

<Info>
**Como funciona a "m√°gica" do contexto:**
Repare que dentro do bloco `{{ #each order.items }}` n√≥s escrevemos apenas `{{ name }}` e n√£o `{{ order.items.name }}`.
Isso acontece porque, dentro do loop, o sistema "foca" apenas no item da vez. Ele j√° sabe que estamos falando dos detalhes daquele produto espec√≠fico.
</Info>

### Formatadores Especiais

Dados brutos de computador geralmente v√™m sem formata√ß√£o (ex: `1250.00`). Para transform√°-los em algo leg√≠vel para humanos, usamos formatadores.

Observe o uso da palavra `money` antes da vari√°vel de pre√ßo. Isso avisa ao sistema: *"Formate este n√∫mero como dinheiro"*.

```handlebars
Valor total: {{ money order.total }}
```
*Resultado:* `R$ 1.250,00`

---

## Exemplo Completo

Template de **Pedido Conclu√≠do** com vari√°veis, loop de itens e condicional de parcelamento.

```handlebars
Ol√° {{ order.billing.first_name }}! Tudo bem? 

Seu pedido #{{ order.id }} foi conclu√≠do!
Resumo da compra: 
{{ #each order.items }} 
‚Ä¢ {{ name }}  {{ quantity }}x {{ money total }}
{{ /each }}

M√©todo de pagamento: {{ order.payment_method_title }}
M√©todo de entrega: {{ order.shipping_method_title }}

{{ #if order.payment_method_id "pix" }}
Seu PIX foi recebido com sucesso!
{{ /if }}

Total: {{ money order.total }}
Equipe {{ store.name }}
```